<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="htwg-paper">
    <template>
        <style>
            /* <htwg-paper> */
            :host {
                cursor: default;
                position: absolute;
                top: 0;
                bottom: 0;
                overflow: auto;
                width: calc(100vw - 50px);
                background-clip: padding-box;
                border-right: 15px outset transparent;
                border-image:url('../img/paper-border-right.png') 0 207 repeat;
                transform: translate(0);
                transition: transform 500ms, width 500ms;
            }
            :host[main] {
                z-index: 10;
                overflow-y: hidden;
                width: calc(100vw + 15px);
            }
            :host.menu-open {
                right: 0;
                transform: translate(-100px);
            }
            :host.page-hide {
                right: 0;
                transform: translate(-100vw);
            }
            :host.page-open {
                width: calc(100vw - 20px);
            }

            div.paper {
                height: 100vh;
                overflow: hidden;
                width: calc(100% - 60px);
                transition: width 500ms, opacity 500ms;
            }
            :host[main] div.paper, :host.page-open div.paper {
                overflow: auto;
                height: 100%;
                width: 100%;
            }

            :host[main] div.title {
                display: none;
            }
            div.title {
                cursor: pointer;
                position: absolute;
                top: 0;
                right: 0;
                margin-right: -60px;
                margin-top: 150px;
                transform: rotate(-90deg);
                transition: opacity 250ms;
            }
            :host.page-open div.title {
                opacity: 0;
            }
            div.title h2 {
                width: 175px;
                margin: 0;
            }
        </style>

        <div class="paper">
            <content></content>
        </div>

        <div class="title">
            <h2>[[title]]</h2>
        </div>
    </template>

    <script>
        Polymer({
            is: 'htwg-paper',
            properties: {
                title: String
            },
            listeners: {
                'tap': 'selectPage'
            },
            ready: function () {
                var lastNextPage = this.querySelector('htwg-page:last-of-type iron-icon.next-page');

                if(lastNextPage)
                    lastNextPage.style.display = 'none';
            },
            selectPage: function (e) {
                e.stopPropagation();

                if(e.detail.x >=  document.documentElement.clientWidth - 20)
                    this.fire('openMenu');
                else
                    this.fire('selectPage');
            },
            toggleMenu: function(e) {
                e.stopPropagation();
                this.fire('toggleMenu');
            }
        });
    </script>
</dom-module>

